#/bin/bash

pkglist=/tmp/pkglist
builddir=/home/ak/.cache/rebuild
exportdir=~/aurpkgbuilds

# Create builddir
if [ ! -d "$builddir" ];then mkdir $builddir
fi

# Create exportdir
if [ ! -d "$exportdir" ];then mkdir $exportdir
fi

#	Getting the list of pkgs which were installed from AUR
pacman -Qqm > $pkglist

for i in $(cat $pkglist); do
	cd $builddir
	git clone http://aur.archlinux.org/${i}.git
	cd ${i}
	makepkg -si --noconfirm
done


# Clean up
read -p "Would you like to remove the builddir? (y/N) " rmbuilddir
if test "$rmbuilddir" = "y"; then
	rm -rf $builddir
fi

exit 0
